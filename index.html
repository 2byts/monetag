<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Earn by Watching Ads</title>
  <script src="//libtl.com/sdk.js" data-zone="9503680" data-sdk="show_9503680"></script>
</head>
<body>
  <h2>🎁 Watch Ads & Earn!</h2>
  <button onclick="watchAd()">▶️ Watch Ad</button>

  <script>
    const userId = new URLSearchParams(location.search).get('id');

    function watchAd() {
      show_9503680().then(() => {
        fetch("https://9869-103-138-145-240.ngrok-free.app/api/reward", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ id: userId })
        }).then(() => {
          alert("✅ Reward added!");
        }).catch(() => {
          alert("❌ Failed to contact server.");
        });
      }).catch(() => {
        alert("❌ Ad failed or was skipped.");
      });
    }
  </script>
</body>
</html>
